<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NJWS5L');</script>
  <!-- End Google Tag Manager -->


</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="content">
    <div class="navigation-wrapper">
  <div class="width-12-12">
    <div class="header navigation">
      <div class="logo-wrapper">
        <a class="styled-logo" href="/">Quarkus</a>
      </div>
      <div class="nav-container">
        <nav>
          <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
          <ul class="nav-list">
            <li>
              <a href="/get-started/" class="">Get Started</a>
            </li>
            <li>
              <a href="/guides/" class="active">Guides</a>
            </li>
            <li>
              <a href="/extensions/" class="">Extensions</a>
            </li>
            <li>
              <a href="/community/" class="">Community</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

    <div class="grid-wrapper guides">
  <div class="grid__item width-12-12">
    <h1 class="text-caps">Quarkus - Using Security</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus comes with integration with the Elytron security subsystem to allow for RBAC based on the
common security annotations <code>@RolesAllowed</code>, <code>@DenyAll</code>, <code>@PermitAll</code> on REST endpoints. An example of an endpoint that makes use of both JAX-RS and Common Security annotations to describe and secure its endpoints is given in <a href="#SubjectExposingResource Example">[SubjectExposingResource Example]</a>.</p>
</div>
<div class="listingblock">
<div class="title">SubjectExposingResource Example</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import java.security.Principal;

import javax.annotation.security.DenyAll;
import javax.annotation.security.PermitAll;
import javax.annotation.security.RolesAllowed;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.SecurityContext;

@Path("subject")
public class SubjectExposingResource {

    @GET
    @Path("secured")
    @RolesAllowed("Tester") <b class="conum">(1)</b>
    public String getSubjectSecured(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal(); <b class="conum">(2)</b>
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }

    @GET
    @Path("unsecured")
    @PermitAll<b class="conum">(3)</b>
    public String getSubjectUnsecured(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal(); <b class="conum">(4)</b>
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }

    @GET
    @Path("denied")
    @DenyAll<b class="conum">(5)</b>
    public String getSubjectDenied(@Context SecurityContext sec) {
        Principal user = sec.getUserPrincipal();
        String name = user != null ? user.getName() : "anonymous";
        return name;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This <code>/subject/secured</code> endpoint requires an authenticated user that has been granted the role "Tester" through the use of the <code>@RolesAllowed("Tester")</code> annotation.</p>
</li>
<li>
<p>The endpoint obtains the user principal from the JAX-RS SecurityContext. This will be non-null for a secured endpoint.</p>
</li>
<li>
<p>The <code>/subject/unsecured</code> endpoint allows for unauthenticated access by specifying the <code>@PermitAll</code> annotation.</p>
</li>
<li>
<p>This call to obtain the user principal will return null if the caller is unauthenticated, non-null if the caller is authenticated.</p>
</li>
<li>
<p>The <code>/subject/denied</code> endpoint disallows any access regardless of whether the call is authenticated by specifying the <code>@DenyAll</code> annotation.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-it-up">Setting it up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You need to add the security extension dependency explicitly if you want to enable security behaviors.
Add the following to your <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependencies&gt;
    &lt;!-- Security extension --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
        &lt;artifactId&gt;quarkus-security-deployment&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The security extension currently supports two different realms for the storage of authentication
and authorization information. Both support storage of this information in properties type files. The next two sections detail the specific configuration properties.</p>
</div>
<div class="sect2">
<h3 id="property-files-realm-configuration">Property Files Realm Configuration</h3>
<div class="paragraph">
<p>The property files realm supports mapping of users to password and users to roles with a combination of properties files. To enable and configure it, the following configuration properties are used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.file.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine whether security via the fila realm is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.file.auth-mechanism</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of authentication mechanism to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.file.realm-name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name to assign the security realm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.file.users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">users.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource name of properties file containing user to password mappings; see <a href="#users-properties">Users.properties</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.file.roles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roles.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource name of properties file containing user to role mappings; see <a href="#roles-properties">Roles.properties</a></p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">example microprofile-config.properties file section for property files realm</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.security.file.enabled=true
quarkus.security.file.users=test-users.properties
quarkus.security.file.roles=test-roles.properties
quarkus.security.file.auth-mechanism=BASIC
quarkus.security.file.auth-mechanism=MyRealm</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="users-properties">Users.properties</h4>
<div class="paragraph">
<p>The <code>quarkus.security.users</code> configuration property specifies a classpath resource which is a properties file with a user to password mapping, one per line. The following <a href="#example test-users.properties file">[example test-users.properties file]</a> illustrates the format:</p>
</div>
<div class="listingblock">
<div class="title">example test-users.properties file</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">scott=jb0ss <b class="conum">(1)</b>
jdoe=p4ssw0rd <b class="conum">(2)</b>
stuart=test
noadmin=n0Adm1n</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>User <code>scott</code> has password defined as <code>jb0ss</code></p>
</li>
<li>
<p>User <code>jdoe</code> has password defined as <code>p4ssw0rd</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="roles-properties">Roles.properties</h4>
<div class="listingblock">
<div class="title">example test-roles.properties file</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">scott=Admin,admin,Tester,user <b class="conum">(1)</b>
jdoe=NoRolesUser <b class="conum">(2)</b>
stuart=admin,user <b class="conum">(3)</b>
noadmin=user</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>User <code>scott</code> has been assigned the roles <code>Admin</code>, <code>admin</code>, <code>Tester</code> and <code>user</code></p>
</li>
<li>
<p>User <code>jdoe</code> has been assigned the role <code>NoRolesUser</code></p>
</li>
<li>
<p>User <code>stuart</code> has been assigned the roles <code>admin</code> and <code>user</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Given these role mappings, only user <code>scott</code> would be allowed to access the <code>/subject/secured</code> endpoint from the <a href="#SubjectExposingResource Example">[SubjectExposingResource Example]</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="embedded-realm-configuration">Embedded Realm Configuration</h3>
<div class="paragraph">
<p>The embedded realm also supports mapping of users to password and users to roles. It uses the main microprofile-config.properties Quarkus configuration file to embed this information. To enable and configure it, the following configuration properties are used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.embedded.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine whether security via the embedded realm is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.embedded.auth-mechanism</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of authentication mechanism to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.embedded.realm-name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quarkus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name to assign the security realm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.embedded.users.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix for the properties that specify user to password mappings; see <a href="#embedded-users">Embedded Users</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">quarkus.security.embedded.roles.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix for the properties that specify user to role mappings; see <a href="#embedded-roles">Embedded Roles</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following is an example microprofile-config.properties file section illustrating the embedded realm configuration:</p>
</div>
<div class="listingblock">
<div class="title">example microprofile-config.properties file section for embedded realm</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.security.embedded.enabled=true
quarkus.security.embedded.users.scott=jb0ss
quarkus.security.embedded.users.stuart=test
quarkus.security.embedded.users.jdoe=p4ssw0rd
quarkus.security.embedded.users.noadmin=n0Adm1n
quarkus.security.embedded.roles.scott=Admin,admin,Tester,user
quarkus.security.embedded.roles.stuart=admin,user
quarkus.security.embedded.roles.jdoe=NoRolesUser
quarkus.security.embedded.roles.noadmin=user
quarkus.security.embedded.auth-mechanism=CUSTOM</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="embedded-users">Embedded Users</h4>
<div class="paragraph">
<p>The user to password mappings are specified in the microprofile-config.properties by property names of the form <code>quarkus.security.embedded.users.&lt;user&gt;=&lt;password&gt;</code>. The following <a href="#Example Passwords">[Example Passwords]</a> illustrates the syntax with the 4 user to password mappings shown in lines 2-5:</p>
</div>
<div class="listingblock">
<div class="title">Example Passwords</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.security.embedded.enabled=true
quarkus.security.embedded.users.scott=jb0ss <b class="conum">(1)</b>
quarkus.security.embedded.users.stuart=test <b class="conum">(2)</b>
quarkus.security.embedded.users.jdoe=p4ssw0rd
quarkus.security.embedded.users.noadmin=n0Adm1n
quarkus.security.embedded.roles.scott=Admin,admin,Tester,user
quarkus.security.embedded.roles.stuart=admin,user
quarkus.security.embedded.roles.jdoe=NoRolesUser
quarkus.security.embedded.roles.noadmin=user</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>User <code>scott</code> has password <code>jb0ss</code></p>
</li>
<li>
<p>User <code>stuart</code> has password <code>test</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="embedded-roles">Embedded Roles</h4>
<div class="paragraph">
<p>The user to role mappings are specified in the microprofile-config.properties by property names of the form <code>quarkus.security.embedded.roles.&lt;user&gt;=role1[,role2[,role3[,&#8230;&#8203;]]]</code>. The following <a href="#Example Roles">[Example Roles]</a> illustrates the syntax with the 4 user to role mappings shown in lines 6-9:</p>
</div>
<div class="listingblock">
<div class="title">Example Roles</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.security.embedded.enabled=true
quarkus.security.embedded.users.scott=jb0ss
quarkus.security.embedded.users.stuart=test
quarkus.security.embedded.users.jdoe=p4ssw0rd
quarkus.security.embedded.users.noadmin=n0Adm1n
quarkus.security.embedded.roles.scott=Admin,admin,Tester,user <b class="conum">(1)</b>
quarkus.security.embedded.roles.stuart=admin,user <b class="conum">(2)</b>
quarkus.security.embedded.roles.jdoe=NoRolesUser
quarkus.security.embedded.roles.noadmin=user</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>User <code>scott</code> has roles <code>Admin</code>, <code>admin</code>, <code>Tester</code>, and <code>user</code></p>
</li>
<li>
<p>User <code>stuart</code> has roles <code>admin</code> and <code>user</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="augmenting-the-security-extension-advanced-topic">Augmenting the Security Extension <em>Advanced Topic</em></h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Augmenting the security extension is an advanced topic that relies on writing a Quarkus extension and understanding all that entails. This only needs to be done if you have security stores and authentication mechanisms that are not supported by existing Quarkus extensions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The security extension has support for overriding its Elytron <code>org.wildfly.security.auth.server.SecurityRealm</code> and the Undertow <code>io.undertow.security.idm.IdentityManager</code> used for authentication and authorization decisions. If  your application needs to integrate with alternative identity stores and/or authentication mechanisms, then you can use this advanced feature to do so. In order to do this, one would write an Quarkus extension as described in <a href="extension-authors-guide.html">Extension Authors Guide</a> to produce <code>SecurityRealmBuildItem</code> and/or <code>IdentityManagerBuildItem</code> items as detailed in the following sections. The JWT RBAC extension described in the <a href="jwt-guide.html">JWT RBAC Security</a> is an example of an extension that makes use of these extension points.</p>
</div>
<div class="sect2">
<h3 id="adding-a-new-security-realm">Adding a new Security Realm</h3>
<div class="paragraph">
<p>If one has an alternative store of identity and role information, it can be integrated by creating a <code>org.wildfly.security.auth.server.SecurityRealm</code> and producing a <code>io.quarkus.security.SecurityRealmBuildItem</code> from within the deployment module of a new extension. The deployment module would be responsible for exposing the necessary configuration information to allow users to enable and configure the security realm identity mappings.</p>
</div>
<div class="paragraph">
<p>An example of this can be seen in the MicroProfile JWT RBAC extension. The relevant JWT extension code fragment is shown in the following listing:</p>
</div>
<div class="listingblock">
<div class="title">MP-JWT Extension SecurityRealm Customization Example</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/**
 * The deployment processor for MP-JWT applications
 */
class SmallRyeJwtProcessor {

    /** */
    JWTAuthContextInfoGroup config; <b class="conum">(1)</b>
...
    /**
     * Configure a TokenSecurityRealm if enabled
     *
     * @param template - jwt runtime template
     * @param securityRealm - producer used to register the TokenSecurityRealm
     * @param container - the BeanContainer for creating CDI beans
     * @param reflectiveClasses - producer to register classes for reflection
     * @return auth config item for the MP-JWT auth method and realm
     * @throws Exception
     */
    @BuildStep
    @Record(ExecutionTime.STATIC_INIT)
    @SuppressWarnings({ "unchecked", "rawtypes" })
    AuthConfigBuildItem configureFileRealmAuthConfig(SmallRyeJwtTemplate template,
            BuildProducer&lt;ObjectSubstitutionBuildItem&gt; objectSubstitution,
            BuildProducer&lt;SecurityRealmBuildItem&gt; securityRealm,
            BeanContainerBuildItem container,
            BuildProducer&lt;ReflectiveClassBuildItem&gt; reflectiveClasses) throws Exception {
        if (config.enabled) {
            // RSAPublicKey needs to be serialized
            ObjectSubstitutionBuildItem.Holder pkHolder = new ObjectSubstitutionBuildItem.Holder(RSAPublicKey.class,
                    PublicKeyProxy.class, PublicKeySubstitution.class);
            ObjectSubstitutionBuildItem pkSub = new ObjectSubstitutionBuildItem(pkHolder);
            objectSubstitution.produce(pkSub);
            <b class="conum">(2)</b>
            // Have the runtime template create the TokenSecurityRealm and create the build item
            RuntimeValue&lt;SecurityRealm&gt; realm = template.createTokenRealm(container.getValue());
            AuthConfig authConfig = new AuthConfig();
            authConfig.setAuthMechanism(config.authMechanism);
            authConfig.setRealmName(config.realmName);
            securityRealm.produce(new SecurityRealmBuildItem(realm, authConfig));

            reflectiveClasses.produce(new ReflectiveClassBuildItem(false, false, ClaimAttributes.class.getName()));
            reflectiveClasses.produce(new ReflectiveClassBuildItem(false, false, ElytronJwtCallerPrincipal.class.getName()));

            // Return the realm authentication mechanism build item
            return new AuthConfigBuildItem(authConfig);
        }
        return null;
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The JWTAuthContextInfoGroup contains the configuration information needed to create the JWT based security realm.</p>
</li>
<li>
<p>The deployment module creates a <code>TokenSecurityRealm</code> using the configured authentication mechanism name and security realm name. <code>TokenSecurityRealm</code> is a security realm implementation that obtains the caller identity and roles from a MicroProfile JWT auth token.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="overriding-the-undertow-identitymanager-implementation">Overriding the Undertow IdentityManager Implementation</h3>
<div class="paragraph">
<p>The default <code>io.undertow.security.idm.IdentityManager</code> installed by the security extension is based on password authentication. It passes a <code>org.wildfly.security.evidence.PasswordGuessEvidence</code> representation of the caller authentication credentials to the security realm to validate a user. If you extend the security extension with a security realm that supports this form of evidence,  you can use the default <code>IdentityManager</code> provided by the security extension. Your extension would need to produce a <code>io.quarkus.security.PasswordRealmBuildItem</code> to indicate that your extension security realm supports <code>PasswordGuessEvidence</code>.</p>
</div>
<div class="paragraph">
<p>If on the other hand, your security realm requires another form of authentication credential evidence, you will need to override the default security extension implementation with one of your own. This requires that your extension produces an <code>io.quarkus.security.IdentityManagerBuildItem</code> with the <code>IdentityManager</code> implementation.</p>
</div>
<div class="paragraph">
<p>An example of this can also be seen in the MicroProfile JWT RBAC extension. Since the security realm the JWT extension installs is based on JWT auth tokens rather than passwords, it must install an identity manager that is able to extract the token and present that to the security realm. This requires a custom <code>IdentityManager</code>. The relevant JWT extension code fragment is shown in the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/**
 * The deployment processor for MP-JWT applications
 */
class SmallRyeJwtProcessor {
...
    /**
     * Create the JwtIdentityManager
     *
     * @param template - jwt runtime template
     * @param securityDomain - the previously created TokenSecurityRealm
     * @param identityManagerProducer - producer for the identity manager
     */
    @BuildStep
    @Record(ExecutionTime.STATIC_INIT)
    void configureIdentityManager(SmallRyeJwtTemplate template, SecurityDomainBuildItem securityDomain,
            BuildProducer&lt;IdentityManagerBuildItem&gt; identityManagerProducer) {
        <b class="conum">(1)</b>
        IdentityManager identityManager = template.createIdentityManager(securityDomain.getSecurityDomain());
        <b class="conum">(2)</b>
        identityManagerProducer.produce(new IdentityManagerBuildItem(identityManager));
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Have the runtime module create the runtime IdentityManager instance, which is an io.quarkus.smallrye.jwt.runtime.auth.JwtIdentityManager.</p>
</li>
<li>
<p>Produce an <code>IdentityManagerBuildItem</code> with the <code>JwtIdentityManager</code> so that the security extension installs that as the application identity manager.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="future-work">Future Work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Support for additional realms that allow for encrypted/hashed information as well as integration with Keycloak for OAUTH and JWT generation support is in the works. We will also be moving to more use of the Elytron APIs over the Undertow APIs to allow for more flexibility in handling various authentication and authorization approaches.</p>
</div>
</div>
</div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/" class="styled-logo">Quarkus</a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what youâ€™ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Contribute</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://twitter.com/quarkusio">Follow us</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://quarkusio.zulipchat.com">Chatroom</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse Microprofile</a></li>
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="http://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
    </span>
    <span class="redhat">
      a Red Hat sponsored project   
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/RHLogo_white.svg"></a>
    </span>
  </div>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
